
<!-- <div class="container mt-4">
    <h3>Stock Ledger</h3>

    <table class="table table-bordered table-striped">
        <thead>
        <tr>
            <th>Date</th>
            <th>Product</th>
            <th>Type</th>
            <th>Qty In</th>
            <th>Qty Out</th>
            <th>Wt In</th>
            <th>Wt Out</th>
            <th>Balance Qty</th>
            <th>Balance Wt</th>
        </tr>
        </thead>

        <tbody>
        <tr ng-repeat="l in ledgers">
            <td>{{ l.created_at | date:'yyyy-MM-dd HH:mm' }}</td>
            <td>{{ l.product.name }}</td>
            <td>
                <span class="badge bg-success" ng-if="l.type=='purchase'">Purchase</span>
                <span class="badge bg-danger" ng-if="l.type=='sale'">Sale</span>
                <span class="badge bg-success" ng-if="l.type=='opening'">Opening</span>
            </td>
            <td>{{ l.qty_in }}</td>
            <td>{{ l.qty_out }}</td>
            <td>{{ l.weight_in }}</td>
            <td>{{ l.weight_out }}</td>
            <td>{{ l.balance_qty }}</td>
            <td>{{ l.balance_weight }}</td>
        </tr>
        </tbody>
    </table>
</div> -->
<div class="page">

    <!-- PAGE HEADER -->
    <div class="page-header d-flex justify-content-between align-items-center">
        <div>
            <h4>Stock Ledger</h4>
            <p class="page-subtitle">
                Product-wise stock movement
            </p>
        </div>

        <div class="page-actions">
            <a href="#!/dashboard" class="btn btn-outline-secondary">
                ‚Üê Back
            </a>
        </div>
    </div>

    <!-- FILTERS -->
    <div class="card mb-3">
        <div class="row g-2 align-items-end">

            <div class="col-md-4">
                <label>Product</label>
                <select class="form-control"
                        ng-model="filters.product_id"
                        ng-options="p.id as p.name for p in products"
                        ng-change="load()">
                    <option value="">All Products</option>
                </select>
            </div>

            <div class="col-md-3">
                <label>From Date</label>
                <input type="date"
                       class="form-control"
                       ng-model="filters.from_date"
                       ng-change="load()">
            </div>

            <div class="col-md-3">
                <label>To Date</label>
                <input type="date"
                       class="form-control"
                       ng-model="filters.to_date"
                       ng-change="load()">
            </div>

        </div>
    </div>

    <!-- LEDGER TABLE -->
    <div class="card">
        <table class="table munim-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Product</th>
                    <th>Type</th>
                    <th class="text-end">In (gm)</th>
                    <th class="text-end">Out (gm)</th>
                    <th class="text-end">Balance (gm)</th>
                </tr>
            </thead>

            <tbody>
                <tr ng-repeat="row in ledger">
                    <td>{{ row.created_at | date:'dd-MM-yyyy' }}</td>

                    <td>{{ row.product.name }}</td>

                    <td>
                        <span class="badge"
                              ng-class="{
                                'bg-success': row.type=='purchase',
                                'bg-danger': row.type=='sale',
                                'bg-secondary': row.type=='opening'
                              }">
                            {{ row.type | uppercase }}
                        </span>
                    </td>

                    <td class="text-end text-success">
                        {{ row.weight_in > 0 ? row.weight_in : '-' }}
                    </td>

                    <td class="text-end text-danger">
                        {{ row.weight_out > 0 ? row.weight_out : '-' }}
                    </td>

                    <td class="text-end">
                        {{ row.balance_weight | number:3 }}
                    </td>
                </tr>

                <tr ng-if="ledger.length === 0">
                    <td colspan="6" class="text-center text-muted">
                        No ledger entries found
                    </td>
                </tr>
            </tbody>

            <!-- TOTALS -->
            <tfoot ng-if="ledger.length">
                <tr class="table-light">
                    <th colspan="3" class="text-end">Total</th>

                    <th class="text-end text-success">
                        {{ totals.in | number:3 }}
                    </th>

                    <th class="text-end text-danger">
                        {{ totals.out | number:3 }}
                    </th>

                    <th class="text-end">
                        {{ totals.closing | number:3 }}
                    </th>
                </tr>
            </tfoot>
        </table>
    </div>

</div>
