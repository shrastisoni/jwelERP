<div class="container mt-4">

    <h4>Payments</h4>

    <div class="row mb-3">
        <div class="col-md-4">
            <input class="form-control"
                   placeholder="Search customer"
                   ng-model="search"
                   ng-change="load()">
        </div>

        <div class="col-md-3">
            <select class="form-control"
                    ng-model="type"
                    ng-change="load()">
                <option value="">All</option>
                <option value="in">Received</option>
                <option value="out">Paid</option>
            </select>
        </div>
    </div>

    <table class="table table-bordered">
        <thead class="table-dark">
            <tr>
                <th>Date</th>
                <th>Party</th>
                <th>Type</th>
                <th class="text-end">Amount</th>
                <th width="160">Action</th>
            </tr>
        </thead>

        <tbody>
            <tr ng-repeat="p in payments">
                <td>{{ p.created_at | date:'dd-MM-yyyy' }}</td>
                <td>{{ p.party.name }}</td>
                <td>{{ p.type == 'in' ? 'Receive' : 'Pay' }}</td>
                <td class="text-end">{{ p.amount | number:2 }}</td>
                <td>
                    <button class="btn btn-sm btn-warning" 
                            ng-click="openEdit(p)">Edit</button>
                    <button class="btn btn-sm btn-danger"
                            ng-click="delete(p.id)">Delete</button>
                </td>
            </tr>
        </tbody>
    </table>

    <!-- EDIT MODAL -->
    <div ng-if="editPayment" >
        <!-- <div class="modal-dialog">
            <div class="modal-content p-3"> -->

                <h5>Edit Payment</h5>

                <input class="form-control mb-2"
                       type="number"
                       ng-model="editPayment.amount">

                <input class="form-control mb-2"
                       ng-model="editPayment.mode"
                       placeholder="Mode">

                <textarea class="form-control mb-2"
                          ng-model="editPayment.note"
                          placeholder="Note"></textarea>

                <button class="btn btn-success"
                        ng-click="update()">Update</button>

                <button class="btn btn-secondary"
                        ng-click="editPayment=null">Cancel</button>

            </div>
        </div>
    <!-- </div>

</div> -->
