
<div class="container mt-4" ng-show="showAddSec">
    <h3>Products</h3>
     <div class="d-flex justify-content-between align-items-center mb-4">
        
        <a ng-click="showAddSec=false" class="btn btn-primary">
            <i class="bi bi-plus-circle"></i> Add New Item
        </a>
    </div>
    <table class="table table-bordered table-striped">
        <thead class="table-dark">
        <tr>
            <th>#</th>
            <th>Name</th>
            <th>Category</th>
            <th>Metal</th>
            <th>Weight</th>
            <th>Price</th>
            <th>Purity</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
        </thead>

        <tbody>
        <tr ng-repeat="p in products">
            <td>{{$index + 1}}</td>
            <td>{{p.name}}</td>
            <td>{{p.category.name}}</td>
            <td class="text-capitalize">{{p.metal}}</td>
            <td>{{p.weight}}</td>
            <td>{{p.price}}</td>
            <td>{{p.purity}}k</td>
            <td>
                <span class="badge"
                    ng-class="p.is_active ? 'bg-success' : 'bg-secondary'">
                    {{ p.is_active ? 'Active' : 'Inactive' }}
                </span>
            </td>

            <td>
                <button class="btn btn-sm"
                        ng-class="p.is_active ? 'btn-danger' : 'btn-success'"
                        ng-click="toggleStatus(p)">
                    {{ p.is_active ? 'Deactivate' : 'Activate' }}
                </button>
                <button ng-click="getProduct(p.id)"
                class="btn btn-sm btn-warning">
                    Edit
                </button>
                <button class="btn btn-sm btn-danger"
                    ng-click="deleteProduct(p.id)">
                    Delete
                </button>
            </td>

        </tr>
        </tbody>
    </table>
</div>

<div class="container mt-4" ng-show="!showAddSec">
    <h3>{{isEdit ? 'Edit' : 'Add'}} Product</h3>

    <div class="card p-3">

        <div class="mb-2">
            <label>Product Name</label>
            <input type="text" class="form-control" ng-model="product.name">
        </div>

        <div class="mb-2">
            <label>Category</label>
            <select class="form-control" ng-model="product.category_id"
                    ng-options="c.id as c.name for c in categories">
                <option value="">Select Category</option>
            </select>
        </div>

        <div class="mb-2">
            <label>Metal</label>
            <select class="form-control" ng-model="product.metal">
                <option value="gold">Gold</option>
                <option value="silver">Silver</option>
            </select>
        </div>
        <div class="mb-2">
            <label>Purity</label>
            <select class="form-control" ng-model="product.purity">
                <option value="24k">24K</option>
                <option value="22k">22K</option>
                <option value="18k">18K</option>
                <option value="14k">14K</option>
            </select> 
        </div>
        <div class="mb-2">
            <label>Weight</label>
            <input type="number" step="0.001" class="form-control"
                   ng-model="product.weight">
        </div>

        <div class="mb-2">
            <label>Price</label>
            <input type="number" step="0.01" class="form-control"
                   ng-model="product.price">
        </div>
        <!-- <div class="mb-2">
            <label>Actions</label>
            <a href="" ng-click="updateProduct(product.id)"
                class="btn btn-sm btn-warning">
                Edit
            </a>
        </div> -->
        <button ng-if="isEdit" class="btn btn-primary mt-2"
                ng-click="updateProduct(product.id)">
            Update Product
        </button>
        <button ng-if="!isEdit" class="btn btn-primary mt-2"
                ng-click="saveProduct()">
            Save Product
        </button>

    </div>
</div>

